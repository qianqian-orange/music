{"version":3,"sources":["webpack:///./src/views/Recommend/index.vue?32ee","webpack:///./src/components/Slide/index.vue?495b","webpack:///src/components/Slide/index.vue","webpack:///./src/components/Slide/index.vue?2d2c","webpack:///./src/components/Slide/index.vue","webpack:///src/views/Recommend/index.vue","webpack:///./src/views/Recommend/index.vue?787a","webpack:///./src/views/Recommend/index.vue","webpack:///./src/views/Recommend/index.vue?3256","webpack:///./src/components/Slide/index.vue?580f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","cds","slides","length","_l","slide","key","id","picUrl","on","onload","_e","_v","item","$event","gotoDetail","directives","name","rawName","value","expression","_s","author","desc","staticRenderFns","_t","index","class","currentPageIndex","throttle","fn","timer","clearTimeout","setTimeout","apply","props","type","Number","data","reset","playTimer","ul","style","width","lis","i","refresh","autoGoNext","methods","$nextTick","initScroll","scrollX","scrollY","loop","threshold","useTransition","momentum","bounce","stopPropagation","probeType","window","addEventListener","mounted","activated","beforeDestroy","destroy","removeEventListener","component","loading","flag","mixins","bottom","components","Slide","Loading","ScrollView","computed","$router","history","push","path","created","Promise","all","code"],"mappings":"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","file":"public/js/chunk-5fa69296.38f8be2b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recommend\"},[_c('ScrollView',{ref:\"scrollView\",attrs:{\"dataSource\":_vm.cds}},[_c('div',{staticClass:\"content\"},[(_vm.slides.length > 0)?_c('Slide',{attrs:{\"length\":_vm.slides.length}},[_c('ul',{staticClass:\"slide-banner-wrapper\"},_vm._l((_vm.slides),function(slide){return _c('li',{key:slide.id,staticClass:\"slide-item\"},[_c('img',{attrs:{\"src\":slide.picUrl,\"alt\":\"image\"},on:{\"load\":_vm.onload}})])}),0)]):_vm._e(),_c('h1',{staticClass:\"title\"},[_vm._v(\"热门歌单推荐\")]),_c('ul',{staticClass:\"songList\"},_vm._l((_vm.cds),function(item){return _c('li',{key:item.id,staticClass:\"item\",on:{\"click\":function($event){return _vm.gotoDetail(item.id)}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.image),expression:\"item.image\"}],attrs:{\"alt\":\"image\"}}),_c('div',{staticClass:\"content\"},[_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(item.author.name))]),_c('p',{staticClass:\"description\"},[_vm._v(_vm._s(item.desc))])])])}),0)],1)]),(_vm.loading)?_c('Loading'):_vm._e(),_c('transition',{attrs:{\"name\":\"detail\"}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"slide\",staticClass:\"slide-banner-scroll\"},[_vm._t(\"default\"),_c('div',{staticClass:\"docs-wrapper\"},_vm._l((_vm.length),function(index){return _c('span',{key:index,staticClass:\"doc\",class:{'active': _vm.currentPageIndex === index - 1}})}),0)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"slide-banner-scroll\" ref=\"slide\">\n    <slot></slot>\n    <div class=\"docs-wrapper\">\n      <span class=\"doc\" v-for=\"index in length\" :key=\"index\" :class=\"{'active': currentPageIndex === index - 1}\"></span>\n    </div>\n  </div>\n</template>\n<script>\nimport BScroll from '@better-scroll/core';\n\nfunction throttle(fn, delay = 300) {\n  let timer = null;\n  return function (...args) {\n    if (timer) clearTimeout(timer);\n    timer = setTimeout(() => {\n      fn.apply(this, args);\n    }, delay);\n  };\n}\n\nexport default {\n  name: 'Slide',\n  props: {\n    length: {\n      type: Number,\n    },\n  },\n  data() {\n    return {\n      currentPageIndex: 0,\n      reset: throttle(function () {\n        clearTimeout(this.playTimer);\n        const ul = this.$refs.slide.children[0];\n        const lis = ul.children;\n        ul.style.width = `${document.documentElement.clientWidth * lis.length}px`;\n        for (let i = 0; i < lis.length; ++i) {\n          lis[i].style.width = `${document.documentElement.clientWidth}px`;\n        }\n        this.refresh();\n        this.autoGoNext();\n      }, 100).bind(this),\n    };\n  },\n  methods: {\n    refresh() {\n      this.$nextTick(() => {\n        this.slide.refresh();\n      });\n    },\n    initScroll() {\n      this.slide = new BScroll(this.$refs.slide, {\n        scrollX: true,\n        scrollY: false,\n        slide: {\n          loop: true,\n          threshold: 100,\n        },\n        useTransition: true,\n        momentum: false,\n        bounce: false,\n        stopPropagation: true,\n        probeType: 2,\n      });\n      this.slide.on('scrollEnd', () => {\n        this.autoGoNext();\n      });\n      this.slide.on('beforeScrollStart', () => {\n        clearTimeout(this.playTimer);\n      });\n      this.slide.on('slideWillChange', (page) => {\n        this.currentPageIndex = page.pageX;\n      });\n      window.addEventListener('resize', this.reset);\n      this.autoGoNext();\n    },\n    autoGoNext() {\n      this.playTimer = setTimeout(() => {\n        clearTimeout(this.playTimer);\n        this.slide.next();\n      }, 1000);\n    },\n  },\n  mounted() {\n    this.initScroll();\n  },\n  activated() {\n    this.$nextTick(() => {\n      this.refresh();\n      this.autoGoNext();\n    });\n  },\n  beforeDestroy() {\n    clearTimeout(this.playTimer);\n    this.slide.destroy();\n    window.removeEventListener('resize', this.reset);\n  },\n};\n\n</script>\n<style scoped lang=\"scss\">\n.slide-banner-scroll {\n  position: relative;\n  overflow: hidden;\n\n  >.docs-wrapper {\n    position: absolute;\n    bottom: 4px;\n    left: 50%;\n    transform: translateX(-50%);\n\n    >.doc {\n      display: inline-block;\n      margin: 0 4px;\n      width: 8px;\n      height: 8px;\n      border-radius: 50%;\n      background: #eee;\n\n      &.active {\n        width: 20px;\n        border-radius: 5px;\n      }\n    }\n  }\n}\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=609833a5&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=609833a5&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"609833a5\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"recommend\">\n    <ScrollView ref=\"scrollView\" :dataSource=\"cds\">\n      <div class=\"content\">\n        <Slide v-if=\"slides.length > 0\" :length=\"slides.length\">\n          <ul class=\"slide-banner-wrapper\">\n            <li v-for=\"slide in slides\" class=\"slide-item\" :key=\"slide.id\">\n              <img :src=\"slide.picUrl\" alt=\"image\" @load=\"onload\">\n            </li>\n          </ul>\n        </Slide>\n        <h1 class=\"title\">热门歌单推荐</h1>\n        <ul class=\"songList\">\n          <li v-for=\"item in cds\" class=\"item\" :key=\"item.id\" @click=\"gotoDetail(item.id)\">\n            <img v-lazy=\"item.image\" alt=\"image\">\n            <div class=\"content\">\n              <p class=\"name\">{{ item.author.name }}</p>\n              <p class=\"description\">{{ item.desc }}</p>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </ScrollView>\n    <Loading v-if=\"loading\" />\n    <transition name=\"detail\">\n      <router-view></router-view>\n    </transition>\n  </div>\n</template>\n<script>\nimport { mapState, mapActions } from 'vuex';\nimport Slide from '@/components/Slide/index.vue';\nimport Loading from '@/components/Loading/index.vue';\nimport ScrollView from '@/components/ScrollView/index.vue';\nimport { jsonp } from '@/utils';\nimport { slideParam, SUCCESS } from '@/config';\nimport mixin from '@/mixin';\n\nconst { bottom } = mixin;\nexport default {\n  name: 'Recommend',\n  data() {\n    return {\n      slides: [],\n      loading: false,\n      flag: false,\n    };\n  },\n  mixins: [bottom],\n  components: {\n    Slide,\n    Loading,\n    ScrollView,\n  },\n  computed: {\n    ...mapState('cd', {\n      cds: state => state.cds,\n    }),\n  },\n  methods: {\n    gotoDetail(id) {\n      this.$router.history.push({\n        path: `/recommend/${id}`,\n      });\n    },\n    onload() {\n      if (this.flag) return;\n      this.flag = true;\n      this.refresh();\n    },\n    ...mapActions('cd', ['getCdList']),\n  },\n  created() {\n    this.loading = true;\n    Promise.all([\n      jsonp('https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg', slideParam),\n      this.getCdList(),\n    ]).then(([slides]) => {\n      this.loading = false;\n      if (slides.code === SUCCESS) {\n        this.slides = slides.data.slider;\n      }\n    });\n  },\n};\n\n</script>\n<style scoped lang=\"scss\">\n.recommend {\n  width: 100%;\n  height: 100%;\n\n  .content {\n    >.title {\n      color: $color-theme;\n      font-size: $font-size-medium;\n      height: 65px;\n      line-height: 65px;\n      text-align: center;\n    }\n\n    >.songList {\n      >.item {\n        display: flex;\n        align-items: center;\n        padding: 0 20px 20px 20px;\n\n        >img {\n          width: 60px;\n          height: 60px;\n          margin-right: 20px;\n        }\n\n        >.content {\n          font-size: $font-size-medium;\n          line-height: 20px;\n\n          >.name {\n            margin-bottom: 10px;\n          }\n\n          >.description {\n            color: hsla(0, 0%, 100%, .3);\n          }\n        }\n      }\n    }\n  }\n}\n\n.slide-banner-wrapper {\n  min-height: 1px;\n  min-width: 1px;\n  font-size: 0;\n  white-space: nowrap;\n\n  >.slide-item {\n    display: inline-block;\n    width: 100%;\n\n    >img {\n      /*display: block;*/\n      width: 100%;\n    }\n  }\n}\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3a6a48fa&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3a6a48fa&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a6a48fa\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3a6a48fa&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3a6a48fa&scoped=true&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=609833a5&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=609833a5&scoped=true&lang=scss&\""],"sourceRoot":""}